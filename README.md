# tfmodulegen

Terraformモジュールのボイラープレートファイルを生成するCLIツール **tfmodulegen** です。

## 概要

`tfmodulegen` は、対話式プロンプトを通じてTerraformモジュールの基本ファイル（`versions.tf`、`main.tf`、`output.tf`、`variable.tf`、`README.md`）を自動生成するツールです。  
また、JSON形式の設定ファイル（`tfmodulegen.config.json`）を利用することで、Terraformのバージョンやプロバイダーのデフォルト設定を事前に定義し、対話式プロンプトで上書きできるようになっています。

## 特徴

- **対話式プロンプト**  
  ユーザーからの入力を元に、モジュール名、説明、Terraformバージョン、プロバイダー情報などを設定可能。

- **ディレクトリ自動生成**  
  入力されたモジュール名と同じ名前のディレクトリを自動生成し、その中に必要なファイルを出力。

- **設定ファイルによるデフォルト値の利用**  
  `tfmodulegen.config.json` を利用して、Terraformバージョンやプロバイダーのデフォルト設定を事前に定義でき、対話式プロンプトでの上書きも可能。

## 必要条件

- [Go](https://golang.org/) 1.16以上（推奨）
- Terraform（※Terraformモジュール作成のための知識が必要）

## インストール方法

1. このリポジトリをクローン、またはソースコードを取得してください。

2. ターミナルで以下のコマンドを実行して、バイナリをビルドします。

   ```bash
   go build -o tfmodulegen main.go
   ```

上記コマンドにより、実行可能な tfmodulegen バイナリが生成されます。

## 設定ファイルの利用

オプションとして、`tfmodulegen.config.json` という設定ファイルを利用することができます。
この設定ファイルにより、Terraformのバージョンやプロバイダー情報のデフォルト値が自動で読み込まれ、対話式プロンプトで初期値として表示されます。

### 設定ファイルの例

```json
{
  "terraform_version": "~> 1.9.6",
  "providers": [
    {
      "name": "google",
      "source": "hashicorp/google",
      "version": "6.4.0"
    }
  ]
}
```

ファイルをプロジェクトルートに配置しておくと、ツール起動時に自動的に読み込まれます。

## 使い方

1. ターミナルで `tfmodulegen` コマンドを実行します。

```bash
./tfmodulegen
```

2. 対話式プロンプトに従って、モジュール名、説明、Terraformバージョン、プロバイダー情報を入力します。
3. 入力が完了すると、モジュール名と同じ名前のディレクトリが生成され、その中に必要なファイルが出力されます。

## 注意事項

- 上書き注意

既に同名のディレクトリが存在する場合、既存のファイルが上書きされる可能性があります。
必要に応じて、バックアップを取ってから実行してください。
